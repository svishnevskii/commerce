{% extends "auctions/layout.html" %}

{% block title %}
    {{ listing.title }}
{% endblock %}

{% block body %}
        <div class="col-md-4">
            <img class="card-img-right flex-auto d-none d-md-block" src="{{ listing.image }}" alt="Card image cap">
        </div>
        <div class="col-md-8">
            <div class="card flex-md-row mb-4 box-shadow h-md-250">
                <div class="listing card-body d-flex flex-column align-items-start">
                    <div class="title">
                        <h1>{{ listing.title }} </h2>
                    </div>
                    <div class="store">
                        {% if has_watchlist %}
                            <a class="btn btn-warning btn-xs btn-block" href="{% url 'delete_watchlist' listing.id %}">Remove from watchlist</a>
                        {% else %}
                            <a class="btn btn-primary btn-xs btn-block" href="{% url 'add_watchlist' listing.id %}">Add Watchlist</a>
                        {% endif %}
                    </div>
                    <div class="category">
                        Categories:
                        <ul class="list-inline">
                            {% for item in categories %}
                                <li class="list-inline-item">
                                    <a href="{% url 'category' item.category.id %}">{{ item.category.title }}</a>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>

                    <div class="description card-text mb-auto">{{ listing.description }}</div>
                    <div class="price">
                        <strong>Current Price: </strong>{{ listing.bid }}
                    </div>
                    <div class="bid">
                        <strong>Bid: </strong>{{ listing.bid }}
                    </div>
                    {% if user.is_authenticated != listing.user %}

                        {% if has_alert != "" %}
                            <div class="alert alert-danger">{{ has_alert }}</div>
                        {% endif %}

                        <strong>Place Your Bid : </strong>

                        <form action="{% url 'placebid' %}" method="POST">
                            {% csrf_token %}
                            <input type="hidden" name="listing_id" value="{{ listing.id }}">

                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">$</span>
                                </div>
                                <input name="bid" type="number" class="form-control" value="0" required="">
                            </div>
                            <hr>
                            <input class="btn btn-success" type="submit" value="Place Bid">
                        </form>
                    {% endif %}
                </div>
            </div>
            {% if listing.user.id == user.id %}
                <div class="btn btn-danger">
                    Close Position
                </div>
            {% endif %}

        </div>


{% endblock %}
